<!DOCTYPE html>
<html>
  <head>
    <link rel="shortcut icon" type="image/x-icon" href="../../../favicon.ico" />
<link href="../../../css/bootstrap/bootstrap.css" rel="stylesheet" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link href="../../../css/bootstrap/bootstrap-responsive.css" rel="stylesheet" />
<link rel="stylesheet" type="text/css" href="../../../css/swc.css" />
<link rel="stylesheet" type="text/css" href="../../../css/swc-bootstrap.css" />
<link rel="alternate" type="application/rss+xml" title="The Software Carpentry Blog" href="/feed.xml"/>
<meta http-equiv="last-modified" content="2014-01-26T05:19:11Z" />
<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

    <title>Software Carpentry: Pins, Balls, and Arbitrary Decisions</title>
  </head>
  <body>
    <header class="header">
      <div class="navbar transparent navbar-inverse">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a href="../../../index.html" id="nav-logo" class="pull-left"></a>
      <div class="nav-collapse collapse pull-right span12">
        <ul class="nav pull-right">
          <li id="nav-bootcamps">
            <a href="../../../bootcamps/index.html">Bootcamps</a>
          </li>
          <li id="nav-lessons">
            <a href="../../../v4/index.html">Lessons</a>
          </li>
          <li id="nav-blog">
            <a href="../../../blog/index.html">Blog</a>
          </li>
          <li id="nav-faq">
            <a href="../../../faq.html">FAQ</a>
          </li>
          <li id="nav-about">
            <a href="../../../pages/index.html">About</a>
          </li>
          <form class="navbar-search" method="get" action="http://www.google.com/search">
            <input type="hidden" name="sitesearch" value="/Users/acabunoc/Projects/sc-site/_site" />
            <input name="q" type="text" class="search-query" placeholder="Search" />
          </form>
        </ul>
      </div>
    </div>
  </div>
</div>

    </header>
    <section id="title" class="content">
        <div class="container">
              <h1>Pins, Balls, and Arbitrary Decisions</h1>
        </div>
    </section>
    <section class="content">
      <div class="container">
            <!-- start content -->
            <p>We'd like to include more extended examples like <a href="/v4/invperc/">invasion percolation</a> in this course, but they're surprisingly hard to write.  One that seems simple at first is a <a href="http://en.wikipedia.org/wiki/Bean_machine">Galton box</a> simulator.  As the diagram below shows, this is simply a a vertical board with interleaved rows of pins.  Small balls are dropped in at the top, and bounce left and right as they hit pins until they land in the boxes at the bottom.  Since each bounce randomly goes left or right, the distribution of balls is binomial, which, in the limit, approximates a normal distribution.</p>
<p><img src="galton-box.png" /></p>
<p>At first glance, this should be pretty simple to code up.  Our objects are:</p>
<ul>
<li>a <em>world</em>, which is W wide and H high;</li>
<li>two <em>walls</em> at X=0 and X=W;</li>
<li>P <em>pins</em>, each of which has an XY location;</li>
<li>B non-overlapping <em>bins</em>, each W/B wide; and</li>
<li>N <em>balls</em>, each of which starts life at X=W/2 and Y=H (i.e., the middle of the top of the board.</li>
</ul>
<p>The physics is pretty simple too: balls fall under the force of gravity until they hit a wall, a pin, or a bin.  If they hit a wall or a pin, we calculate their new velocity using conservation of energy and a bit of trig.  If they hit a bin, we increment its counter so that we can see how closely our final result approximates a bell curve.</p>
<p>In order to calculate a new trajectory for a ball, though, we need to know exactly where it struck the pin, which means we need to know its radius and the pin's radius as well as the locations of their centers.  We can simplify by making one or the other a point instead of a circle, but we obviously can't do that for both of them&mdash;the chances of any collisions at all would be pretty close to zero.</p>
<p>The choice isn't symmetrical: if the ball has a radius, then it can rotate as a result of collision.  That will affect its trajectory because its rotation will dissipate energy, so it won't bounce as vigorously.  Point masses <em>should</em> give the same distribution as real balls, but there's another trap waiting for us.  Think about what happens when we drop a ball vertically on the top center pin.  Its velocity when it hits is (0, v<sub>y</sub>), so if the coefficient of elasticity is <em>E</em>, its post-bounce velocity is (0, Ev<sub>y</sub>), so it goes uuuuuuup, and comes back dooooown, and bounces with velocity (0, E<sup>2</sup>v<sub>y</sub>) and goes up, and comes down, and on and on.  Barring numerical catastrophe, it never hits any other pins at all: after a few iterations, it's just vibrating infinitesimally in the Y axis on the top edge of the first pin.</p>
<p>We can "fix" this by introducing balls with some initial X velocity, but how much should they have?  Alternatively, we could randomize bounces a little bit, but how?  Do we calculate a post-bounce angle and perturb it by a small random amount?  Or jitter the X and Y post-bounce energies?  Or something else equally artificial?  And no matter what we choose, how can we turn around after throwing together half a dozen arbitrary decisions and say that this is "simulating" anything?</p>
<p>There are days when I really miss the Game of Life...</p>

            <p><em>Originally posted 2010-12-06 by Greg Wilson in Content.</em></p>
            <!-- end content -->
            
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_shortname = 'software-carpentry';
    var disqus_developer = 1;
    var disqus_identifier = "";
    var disqus_title = '<p>Pins, Balls, and Arbitrary Decisions</p>';
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



      </div>
    </section>
    <footer class="content">
  <div class="container">
    <div class="links">
      <a href="mailto:admin@software-carpentry.org">Email</a>
      <a href="https://twitter.com/swcarpentry">Twitter</a>
      <a href="http://software-carpentry.org/feed.xml">RSS</a>
      <a href="https://github.com/swcarpentry">GitHub</a>
      <a href="irc://freenode/swcarpentry">IRC</a>
      <a href="https://www.facebook.com/SoftwareCarpentry">Facebook</a>
      <a href="https://www.google.com/+Software-carpentryOrg">Google+</a>
      <a href="../../../license.html">License</a>
      <a class="bugreport" href="mailto:admin@software-carpentry.org?subject=bug%20in%20blog/2010/12/pins-balls-and-arbitrary-decisions.html">Bug Report</a>
    </div>
  </div>
</footer>


    <!-- Le javascript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="../../../js/jquery-1.9.1.min.js"></script>
<script src="../../../js/bootstrap/bootstrap.min.js"></script>

    <!-- Google Analytics -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-37305346-1']);
  _gaq.push(['_setDomainName', 'software-carpentry.org']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

  </body>
</html>
